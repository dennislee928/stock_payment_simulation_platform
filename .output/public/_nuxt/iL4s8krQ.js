import{g as C,k as h,l as k,c as l,a as t,m as c,n as T,v as F,j as n,t as a,F as r,r as g,o,d as p,p as S}from"./BkbVJwBK.js";import{u as B}from"./DvPb1CW2.js";import{u as N}from"./DyhDVP4o.js";import"./CJzurjDg.js";const V={class:"max-w-4xl mx-auto mb-10"},D={class:"mb-8"},$={class:"flex shadow-md rounded-lg overflow-hidden"},j=["disabled"],z={key:0},A={key:1},E={key:0,class:"mt-2 text-red-500"},L={key:0,class:"mb-10"},M={class:"bg-white rounded-lg shadow overflow-hidden"},R={class:"w-full"},U={class:"py-3 px-4"},q={class:"py-3 px-4"},G={class:"py-3 px-4"},H={class:"py-3 px-4 text-right"},I={class:"py-3 px-4 text-center"},J=["onClick"],K={key:1,class:"mb-10"},O={class:"bg-white rounded-lg shadow overflow-hidden"},P={class:"w-full"},Q={class:"py-3 px-4"},W={class:"py-3 px-4"},X={class:"py-3 px-4 text-right"},Y={class:"py-3 px-4 text-center"},Z=["onClick"],at=C({__name:"index",setup(tt){const u=h(""),x=h(null),{loading:y,error:b,searchStock:v,recentStocks:_}=B(),{addToCart:f}=N(),i=h([]);k(u,d=>{x.value&&clearTimeout(x.value),d.length>=2?x.value=setTimeout(async()=>{const s=await v(d);s&&(i.value=s)},500):i.value=[]});function m(d){try{f(d,1)}catch(s){console.error("添加到購物車失敗:",s)}}return(d,s)=>(o(),l("div",null,[t("div",V,[s[5]||(s[5]=t("div",{class:"text-center my-8"},[t("h1",{class:"text-3xl font-bold mb-2"},"台股模擬購買平台"),t("p",{class:"text-gray-600"}," 搜尋股票代碼或名稱，將其加入購物車進行模擬交易 ")],-1)),t("div",D,[t("div",$,[T(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),type:"text",placeholder:"輸入股票代碼或名稱...",class:"flex-grow p-4 outline-none text-lg"},null,512),[[F,u.value]]),t("button",{class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-4 transition",disabled:n(y)},[n(y)?(o(),l("span",z,"搜尋中...")):(o(),l("span",A,"搜尋"))],8,j)]),n(b)?(o(),l("p",E,a(n(b)),1)):c("",!0)]),i.value.length>0?(o(),l("div",L,[s[2]||(s[2]=t("h2",{class:"text-xl font-semibold mb-4"},"搜尋結果",-1)),t("div",M,[t("table",R,[s[1]||(s[1]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-3 px-4 text-left"},"代碼"),t("th",{class:"py-3 px-4 text-left"},"名稱"),t("th",{class:"py-3 px-4 text-left"},"產業"),t("th",{class:"py-3 px-4 text-right"},"價格"),t("th",{class:"py-3 px-4 text-center"},"操作")])],-1)),t("tbody",null,[(o(!0),l(r,null,g(i.value,e=>(o(),l("tr",{key:e.symbol,class:"border-t border-gray-200"},[t("td",U,a(e.symbol),1),t("td",q,a(e.name),1),t("td",G,a(e.industry||"暫無資料"),1),t("td",H,[e.price?(o(),l(r,{key:0},[p(a(e.price.toFixed(2))+" ",1),e.change?(o(),l("span",{key:0,class:S({"text-red-500":e.change<0,"text-green-500":e.change>0})}," ("+a(e.change>0?"+":"")+a(e.change.toFixed(2))+") ",3)):c("",!0)],64)):(o(),l(r,{key:1},[p(" -- ")],64))]),t("td",I,[t("button",{onClick:w=>m(e.symbol),class:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded transition"}," 加入購物車 ",8,J)])]))),128))])])])])):c("",!0),n(_).length>0?(o(),l("div",K,[s[4]||(s[4]=t("h2",{class:"text-xl font-semibold mb-4"},"最近查看",-1)),t("div",O,[t("table",P,[s[3]||(s[3]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-3 px-4 text-left"},"代碼"),t("th",{class:"py-3 px-4 text-left"},"名稱"),t("th",{class:"py-3 px-4 text-right"},"價格"),t("th",{class:"py-3 px-4 text-center"},"操作")])],-1)),t("tbody",null,[(o(!0),l(r,null,g(n(_),e=>(o(),l("tr",{key:e.symbol,class:"border-t border-gray-200"},[t("td",Q,a(e.symbol),1),t("td",W,a(e.name),1),t("td",X,[e.price?(o(),l(r,{key:0},[p(a(e.price.toFixed(2)),1)],64)):(o(),l(r,{key:1},[p(" -- ")],64))]),t("td",Y,[t("button",{onClick:w=>m(e.symbol),class:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded transition"}," 加入購物車 ",8,Z)])]))),128))])])])])):c("",!0)])]))}});export{at as default};
