import{_ as M}from"./jX1a1AOw.js";import{g as z,s as V,k as f,q as P,c as m,j as n,a as t,t as o,F as W,x as I,b as p,w as y,p as $,n as F,v as q,B as A,o as c,d as h}from"./BkbVJwBK.js";import{u as L}from"./DvPb1CW2.js";import{u as Q}from"./DyhDVP4o.js";import"./CJzurjDg.js";function E(){function _(r){return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r)}function w(r){return new Intl.NumberFormat("zh-TW",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(r/100)}function l(r){if(!r)return"-";const a=new Date(r);return new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(a)}function v(r,a=!0){if(r===0)return"0.00";const b=r>0?"+":"";return a?`${b}${r.toFixed(2)}`:r.toFixed(2)}return{formatCurrency:_,formatPercent:w,formatDate:l,formatStockChange:v}}const R={class:"max-w-4xl mx-auto p-4"},U={key:0,class:"flex justify-center py-12"},G={key:1,class:"bg-red-50 text-red-700 p-6 rounded-lg"},H={class:"mb-6"},J={class:"bg-white rounded-lg shadow-md p-6 mb-6"},K={class:"flex flex-col md:flex-row md:justify-between md:items-center mb-6"},O={class:"text-2xl font-bold"},X={class:"text-gray-500 mt-1"},Y={class:"flex flex-col items-end mt-4 md:mt-0"},Z={class:"text-3xl font-bold"},tt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},et={class:"border rounded-lg p-3 text-center"},st={class:"font-bold"},ot={class:"border rounded-lg p-3 text-center"},rt={class:"font-bold"},nt={class:"border rounded-lg p-3 text-center"},dt={class:"font-bold"},it={class:"border rounded-lg p-3 text-center"},lt={class:"font-bold"},at={class:"bg-white rounded-lg shadow-md p-6 mb-6"},ut={class:"flex items-center mb-6"},mt={class:"mr-8"},ct={class:"font-bold text-lg"},vt={class:"flex items-center"},bt={class:"ml-auto"},xt={class:"font-bold text-lg"},gt={class:"flex flex-col md:flex-row justify-between gap-4"},ft={class:"mt-4 p-3 bg-green-50 text-green-700 rounded-lg"},pt={key:3,class:"bg-white rounded-lg shadow-md p-8 text-center"},yt={class:"text-gray-500 mb-4"},Ft=z({__name:"[symbol]",setup(_){const l=V().params.symbol,{getStockPrice:v,loading:r,error:a}=L(),{addToCart:b}=Q(),{formatCurrency:u,formatPercent:D,formatStockChange:T}=E(),s=f(null),d=f(1),x=f(!1);async function k(){try{const i=await v(l);i&&(s.value=i)}catch(i){console.error(`獲取股票 ${l} 詳細資訊失敗:`,i)}}function S(){try{if(d.value<=0)return;b(l,d.value),x.value=!0,setTimeout(()=>{x.value=!1},3e3)}catch(i){console.error("添加到購物車失敗:",i)}}function N(){d.value++}function j(){d.value>1&&d.value--}return P(()=>{k()}),(i,e)=>{var C;const g=M;return c(),m("div",R,[n(r)&&!s.value?(c(),m("div",U,e[1]||(e[1]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)]))):n(a)?(c(),m("div",G,[e[2]||(e[2]=t("p",{class:"font-bold"},"載入失敗",-1)),t("p",null,o(n(a)),1),t("button",{onClick:k,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," 重試 ")])):s.value?(c(),m(W,{key:2},[t("div",H,[p(g,{to:"/",class:"text-blue-600 hover:text-blue-800 flex items-center"},{default:y(()=>e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),h(" 返回搜尋 ")])),_:1})]),t("div",J,[t("div",K,[t("div",null,[t("h1",O,o(s.value.symbol)+" - "+o(s.value.name),1),t("p",X,o(s.value.industry||"一般"),1)]),t("div",Y,[t("div",Z,o(n(u)(s.value.price)),1),t("div",{class:$([{"text-red-600":s.value.change<0,"text-green-600":s.value.change>0,"text-gray-500":s.value.change===0},"text-lg font-semibold"])},o(n(T)(s.value.change))+" ("+o(n(D)(s.value.changePercent))+") ",3)])]),t("div",tt,[t("div",et,[e[4]||(e[4]=t("div",{class:"text-sm text-gray-500 mb-1"},"成交量",-1)),t("div",st,o(((C=s.value.volume)==null?void 0:C.toLocaleString())||"-"),1)]),t("div",ot,[e[5]||(e[5]=t("div",{class:"text-sm text-gray-500 mb-1"},"日期",-1)),t("div",rt,o(s.value.date||"-"),1)]),t("div",nt,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500 mb-1"},"52週最高",-1)),t("div",dt,o(n(u)(s.value.price*1.2)),1)]),t("div",it,[e[7]||(e[7]=t("div",{class:"text-sm text-gray-500 mb-1"},"52週最低",-1)),t("div",lt,o(n(u)(s.value.price*.8)),1)])])]),t("div",at,[e[12]||(e[12]=t("h2",{class:"text-xl font-semibold mb-4"},"模擬購買",-1)),t("div",ut,[t("div",mt,[e[8]||(e[8]=t("div",{class:"text-sm text-gray-500 mb-1"},"單價",-1)),t("div",ct,o(n(u)(s.value.price)),1)]),t("div",null,[e[9]||(e[9]=t("div",{class:"text-sm text-gray-500 mb-1"},"數量",-1)),t("div",vt,[t("button",{onClick:j,class:"border border-gray-300 rounded-l px-3 py-1 text-lg"}," - "),F(t("input",{"onUpdate:modelValue":e[0]||(e[0]=B=>d.value=B),type:"number",class:"border-t border-b border-gray-300 w-16 text-center py-1",min:"1"},null,512),[[q,d.value]]),t("button",{onClick:N,class:"border border-gray-300 rounded-r px-3 py-1 text-lg"}," + ")])]),t("div",bt,[e[10]||(e[10]=t("div",{class:"text-sm text-gray-500 mb-1"},"小計",-1)),t("div",xt,o(n(u)(s.value.price*d.value)),1)])]),t("div",gt,[t("button",{onClick:S,class:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition"}," 加入購物車 "),p(g,{to:"/cart",class:"bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg text-center transition"},{default:y(()=>e[11]||(e[11]=[h(" 前往購物車 ")])),_:1})]),F(t("div",ft," 已成功加入購物車！ ",512),[[A,x.value]])]),e[13]||(e[13]=I('<div class="bg-white rounded-lg shadow-md p-6"><h2 class="text-xl font-semibold mb-4">公司資訊</h2><div class="space-y-3"><div class="border-b pb-3"><div class="text-sm text-gray-500 mb-1">營收</div><div class="font-medium">依季公告</div></div><div class="border-b pb-3"><div class="text-sm text-gray-500 mb-1">每股盈餘</div><div class="font-medium">依季公告</div></div><div class="border-b pb-3"><div class="text-sm text-gray-500 mb-1">配息資訊</div><div class="font-medium">依年公告</div></div></div><div class="mt-4 text-sm text-gray-500"><p>* 此頁面僅作為模擬交易用途，無法確保資料即時性</p><p>* 投資股票有賺有賠，請詳閱公開說明書</p></div></div>',1))],64)):(c(),m("div",pt,[e[15]||(e[15]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[16]||(e[16]=t("h2",{class:"text-xl font-semibold mb-2"},"找不到股票資訊",-1)),t("p",yt,"無法找到代號為 "+o(n(l))+" 的股票資訊",1),p(g,{to:"/",class:"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},{default:y(()=>e[14]||(e[14]=[h(" 返回搜尋 ")])),_:1})]))])}}});export{Ft as default};
