import{_ as C}from"./jX1a1AOw.js";import{g as E,k as x,q as N,s as V,c as r,a as e,b as a,t as o,w as i,x as g,m as A,F as D,r as L,o as d,d as u}from"./BkbVJwBK.js";import{u as T}from"./CJzurjDg.js";const q={class:"max-w-3xl mx-auto"},z={key:0,class:"text-center py-12"},F={key:1,class:"bg-red-50 text-red-700 p-8 rounded-lg shadow-md text-center my-12"},S={key:2},$={key:0,class:"bg-green-50 p-8 rounded-lg shadow-md my-12"},Q={class:"bg-white p-6 rounded-lg shadow mb-6"},R={class:"grid grid-cols-2 gap-4"},Y={class:"font-medium"},Z={class:"font-medium"},G={class:"font-medium"},H={class:"font-medium"},J={class:"flex justify-center space-x-4"},K={key:1,class:"bg-yellow-50 p-8 rounded-lg shadow-md my-12"},O={class:"bg-white p-6 rounded-lg shadow mb-6"},P={class:"grid grid-cols-2 gap-4"},U={class:"font-medium"},W={class:"font-medium"},X={class:"font-medium"},tt={class:"font-medium"},et={key:0,class:"mt-6 p-4 bg-yellow-50 rounded-lg"},st={class:"font-semibold mb-2"},ot={class:"text-gray-500"},lt={class:"font-medium"},rt={class:"flex justify-center"},dt={key:2,class:"bg-red-50 p-8 rounded-lg shadow-md my-12"},nt={class:"bg-white p-6 rounded-lg shadow mb-6"},at={class:"text-gray-700"},it={class:"flex justify-center space-x-4"},vt=E({__name:"result",setup(ut){const m=x(null),s=x(null),b=x(!0),v=x(null);return N(async()=>{try{const t=V().query.orderId;if(!t)throw new Error("沒有找到訂單 ID");const{data:l,error:p}=await T(`/api/order/${t}`,"$hryZYQqzIM");if(p.value)throw new Error("無法獲取訂單資訊");if(!l.value)throw new Error("未收到訂單資訊");s.value=l.value,m.value=l.value.status}catch(n){console.error("獲取訂單資訊時發生錯誤:",n),v.value=typeof n=="string"?n:n instanceof Error?n.message:"載入時發生未知錯誤",m.value="failure"}finally{b.value=!1}}),(n,t)=>{var p,w,c,f,y,h,_,k,M,I;const l=C;return d(),r("div",q,[b.value?(d(),r("div",z,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"},null,-1),e("p",{class:"text-lg"},"正在載入訂單資訊...",-1)]))):v.value?(d(),r("div",F,[t[2]||(t[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[3]||(t[3]=e("h1",{class:"text-2xl font-bold mb-2"},"載入失敗",-1)),e("p",null,o(v.value),1),a(l,{to:"/",class:"inline-block mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},{default:i(()=>t[1]||(t[1]=[u(" 返回首頁 ")])),_:1})])):(d(),r("div",S,[m.value==="success"?(d(),r("div",$,[t[11]||(t[11]=g('<div class="text-center mb-8"><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><h1 class="text-3xl font-bold mb-2 text-green-700">交易成功</h1><p class="text-green-600">您的股票購買訂單已完成付款</p></div>',1)),e("div",Q,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold mb-4"},"訂單詳情",-1)),e("div",R,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-gray-500 text-sm"},"訂單編號",-1)),e("p",Y,o(((p=s.value)==null?void 0:p.orderId)||"-"),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-gray-500 text-sm"},"付款時間",-1)),e("p",Z,o(((w=s.value)==null?void 0:w.paymentTime)||"-"),1)]),e("div",null,[t[6]||(t[6]=e("p",{class:"text-gray-500 text-sm"},"付款方式",-1)),e("p",G,o(((c=s.value)==null?void 0:c.paymentMethod)||"-"),1)]),e("div",null,[t[7]||(t[7]=e("p",{class:"text-gray-500 text-sm"},"付款金額",-1)),e("p",H,o(((f=s.value)==null?void 0:f.totalAmount)||"-"),1)])])]),e("div",J,[a(l,{to:"/account/orders",class:"px-6 py-2 border border-green-600 text-green-600 rounded-lg hover:bg-green-50"},{default:i(()=>t[9]||(t[9]=[u(" 查看我的訂單 ")])),_:1}),a(l,{to:"/",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},{default:i(()=>t[10]||(t[10]=[u(" 繼續購買 ")])),_:1})])])):m.value==="pending"?(d(),r("div",K,[t[18]||(t[18]=g('<div class="text-center mb-8"><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h1 class="text-3xl font-bold mb-2 text-yellow-700">交易處理中</h1><p class="text-yellow-600">您的訂單已建立，正在等待付款確認</p></div>',1)),e("div",O,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold mb-4"},"付款資訊",-1)),e("div",P,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-gray-500 text-sm"},"訂單編號",-1)),e("p",U,o(((y=s.value)==null?void 0:y.orderId)||"-"),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-gray-500 text-sm"},"付款期限",-1)),e("p",W,o(((h=s.value)==null?void 0:h.expireDate)||"-"),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-gray-500 text-sm"},"付款方式",-1)),e("p",X,o(((_=s.value)==null?void 0:_.paymentMethod)||"-"),1)]),e("div",null,[t[15]||(t[15]=e("p",{class:"text-gray-500 text-sm"},"付款金額",-1)),e("p",tt,o(((k=s.value)==null?void 0:k.totalAmount)||"-"),1)])]),(M=s.value)!=null&&M.paymentInfo?(d(),r("div",et,[e("h3",st,o(s.value.paymentMethod==="ATM"?"ATM 轉帳資訊":"超商繳費資訊"),1),(d(!0),r(D,null,L(s.value.paymentInfo,(B,j)=>(d(),r("p",{key:j,class:"mb-1"},[e("span",ot,o(j)+":",1),e("span",lt,o(B),1)]))),128))])):A("",!0)]),e("div",rt,[a(l,{to:"/",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},{default:i(()=>t[17]||(t[17]=[u(" 返回首頁 ")])),_:1})])])):(d(),r("div",dt,[t[22]||(t[22]=g('<div class="text-center mb-8"><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg><h1 class="text-3xl font-bold mb-2 text-red-700">交易失敗</h1><p class="text-red-600">很抱歉，您的交易未能完成</p></div>',1)),e("div",nt,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold mb-4"},"錯誤詳情",-1)),e("p",at,o(((I=s.value)==null?void 0:I.errorMessage)||"發生未知錯誤，請稍後再試或聯繫客服"),1)]),e("div",it,[a(l,{to:"/cart",class:"px-6 py-2 border border-red-600 text-red-600 rounded-lg hover:bg-red-50"},{default:i(()=>t[20]||(t[20]=[u(" 返回購物車 ")])),_:1}),a(l,{to:"/",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},{default:i(()=>t[21]||(t[21]=[u(" 返回首頁 ")])),_:1})])]))]))])}}});export{vt as default};
